webpackJsonp([300],{cOhK:function(e,t,n){"use strict";function o(e){return i.get("fba")&&(e.v2ActivateExperiment("unauth_desktop_show_google_one_tap_modal_in_log_out")||"").startsWith("enabled")}t.a=o;var i=n("FqaO"),a=n("ok+N")},fgGX:function(e,t,n){"use strict";var o=n("FqaO"),i={},a="disableUnauthGoogleOneTap";i.isGoogleOneTapDisabled=function(){return"1"===o.get("disableUnauthGoogleOneTap")||o.get("fba")},i.disableGoogleOneTapDialog=function(){o.set("disableUnauthGoogleOneTap","1",168)},t.a=i},sIZ1:function(e,t,n){"use strict";function o(){return{type:"GOOGLE_ONE_TAP_FAILED",payload:{}}}function i(e,t){return e.useGoogleCopy?E.a.createElement("div",{style:A.googleTOSContainer},E.a.createElement(v.a,{unsafeCSS:I}),E.a.createElement("span",{style:A.googleTOSText},E.a.createElement("span",{dangerouslySetInnerHTML:{__html:x()}}))):E.a.createElement("div",{style:A.pinterestTOSContainer},E.a.createElement("span",{style:A.pinterestTOSText},E.a.createElement("span",{dangerouslySetInnerHTML:{__html:k(t.country)}})))}function a(e){var t=e.credentialsPlaceholderHeight,n=Object.assign({},F.placeholderWrapper,{height:j(t-U)}),o=Object.assign({},F.contentWrapper,{top:j(t-P)});return E.a.createElement("div",null,E.a.createElement("div",{style:n}),E.a.createElement("div",{style:o},E.a.createElement("div",{style:F.textWrapper},E.a.createElement(N.J,{align:"center",size:"md"},E.a.createElement(G,{dark:!0,noContainer:!0,disableWordBreak:!0})))))}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var y=n("d6ZO"),E=n.n(y),S=n("DUIN"),T=n("BAXv"),b=n("gVmS"),O=n("5tOk"),w=n("W/Cr"),v=n("1lmp"),L=n("IaRT"),C=n.n(L),A={googleTOSContainer:{hyphens:"none"},googleTOSText:{fontWeight:"normal",textAlign:"left",color:"#757575",fontSize:"12px",fontFamily:"'Roboto',sans-serif",display:"block",width:"100%"},pinterestTOSContainer:{hyphens:"none"},pinterestTOSText:{fontSize:"11px",fontWeight:"normal",textAlign:"center",color:"#aaa",width:"224px"}},I="\n  .googleTOSLink {\n    color: #4285f4;\n    cursor: pointer;\n    text-decoration: underline;\n  }\n",x=function e(){var t=window&&window.location&&window.location.hostname||"Pinterest";return O.c(w.a._('To create your account, Google will share your name, email address, and profile picture with {{ domain }}. By continuing, you agree to {{ domain }}\'s <a href="{{ privacy_policy_url }}">privacy policy</a> and <a href="{{ tos_url }}">terms of service</a>.',"Short statement shown before a user signs up using their Google account that explains which permissions the user will be granting Pinterest. This statement is followed by our privacy policy and terms of service disclosure"),{domain:t,tos_url:T.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL+'" class="googleTOSLink',privacy_policy_url:T.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL+'" class="googleTOSLink'})},k=function e(t){return T.a.GEN.templateConst.settings.EU_COUNTRIES.indexOf(t)>-1?O.c(w.a._('By continuing with the account that you select above, you agree to Pinterest\'s <a href="{{ tos_url }}">Terms of Service</a>, <a href="{{ privacy_policy_url }}">Privacy Policy</a> and <a href="{{ cookie_url }}"> Cookie use</a>.'),{tos_url:T.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:T.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL,cookie_url:T.a.GEN.templateConst.settings.ABOUT_COOKIE_URL}):O.c(w.a._('By continuing with the account that you select above, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}" target="_blank" >Terms of Service</a> and <a data-test-id="privacy" href="{{ privacy_policy_url }}" target="_blank">Privacy Policy</a>'),{tos_url:T.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:T.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL})};i.contextTypes={country:C.a.string.isRequired};var G=i,N=n("gEaE"),R=378,P=4,U=20,D=20,j=function e(t){return t+"px"},F={placeholderWrapper:{background:"#fff",textAlign:"center",position:"fixed",width:j(378),right:j(20),top:j(U)},contentWrapper:{zIndex:"10000",background:"#fff",textAlign:"center",position:"fixed",borderRadius:"0px 0px 3px 3px",boxShadow:"0 2px 2px rgba(0,0,0,.12)",width:j(378),right:j(20)},textWrapper:{margin:"4px 30px 6px"},googleTextWrapper:{padding:"0px 24px 9px",fontFamily:"'Roboto',sans-serif"}},W=n("fgGX"),B=n("5JMz"),M=n("Wcb7"),q=n("cOhK"),H=n("85jk"),z=n("SCJe"),J=n("Kqaz"),Y=n("MQ2h"),V=n.n(Y),K=n("FGUD"),Q=n("+B8E"),X=n("kzic"),Z=n("OIxG"),$=function e(t){return t+"px"},ee=function(e){function t(){var n,o,i;r(this,t);for(var a=arguments.length,c=Array(a),s=0;s<a;s++)c[s]=arguments[s];return n=o=l(this,e.call.apply(e,[this].concat(c))),o.state={animationMinHeight:-1,showRegisterRequestLoading:!1},o.mountStyle=function(){return o.setState({showRegisterRequestLoading:!0})},o.handleLoginButtonClick=function(e){var t=e.event;Object(H.a)("unauth.google_one_tap.confirmation_dialog."+o.props.loggingId+".login_click"),o.clearDelayedSignupTimeout(),t&&(t.preventDefault(),t.stopPropagation()),o.props.handleLogin()},i=n,l(o,i)}return c(t,e),t.prototype.componentDidMount=function e(){var t=this,n=1e3*this.props.signupDelay;this.delayedSignupTimeoutId=window.setTimeout(function(){Object(H.a)("unauth.google_one_tap.confirmation_dialog."+t.props.loggingId+".signup_delay_timer_reached"),t.requestAnimationFrameId=window.requestAnimationFrame(t.mountStyle),t.props.handleSignup()},n)},t.prototype.componentWillUnmount=function e(){this.clearDelayedSignupTimeout(),this.cancelAnimationFrame()},t.prototype.clearDelayedSignupTimeout=function e(){this.delayedSignupTimeoutId&&window.clearTimeout(this.delayedSignupTimeoutId)},t.prototype.cancelAnimationFrame=function e(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId)},t.prototype.render=function e(){var t=this,n=this.state,o=n.animationMinHeight,i=n.showRegisterRequestLoading,a={transitionProperty:"min-height",transitionDuration:"500ms",transitionTimingFunction:"ease-in-out"};if(o>=0){var r=o;i&&(r=0),Object.assign(a,{minHeight:$(r)})}return E.a.createElement("div",{style:a,ref:function e(n){!n||t.state.showRegisterRequestLoading||t.state.animationMinHeight>0||t.setState({animationMinHeight:n.clientHeight})}},E.a.createElement(N.b,{direction:"column",display:"flex",flex:"grow",justifyContent:"center",alignItems:"center"},E.a.createElement(N.b,null,E.a.createElement(N.J,{bold:!0,size:"xl",align:"center"},i?w.a._("Finishing up...","Title of a dialog telling the user that an account is almost done being created."):w.a._("Creating your account...","Title of a dialog telling the user that an account is being created."))),E.a.createElement(N.b,{paddingY:4},E.a.createElement(N.F,{accessibilityLabel:w.a._("Account is being created","Accessibility label for account creation loading dialog"),paddingY:2,show:!0})),i?null:E.a.createElement(N.b,{marginTop:2},E.a.createElement(N.J,{inline:!0,align:"center",size:"md"},w.a._("Didnâ€™t mean to create a new account?","Description text telling the user that they can log in if they did not intend to create a new account"))),i?null:E.a.createElement(N.b,null,E.a.createElement(N.J,{inline:!0,align:"center",size:"md"},E.a.createElement(N.s,{inline:!0,bold:!0,href:"/login",onClick:this.handleLoginButtonClick},w.a._("Click here to log in.","Login button which will show the login modal and enable the user to log in"))))))},t}(y.Component),te=n("sXYb"),ne=n("6Jd8"),oe={modalOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px"},staticContinueButtonLoginLink:{cursor:"pointer",fontWeight:"normal"}},ie={DELAYED_SIGNUP_LOADING_SPINNER:"delayedSignupLoadingSpinner",STATIC_SIGNUP_LOGIN:"staticSignupLogin",STATIC_SIGNUP_LOGIN_WITH_TOS:"staticSignupLoginWithTOS"},ae=function(e){function t(){var n,o,i;s(this,t);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=o=p(this,e.call.apply(e,[this].concat(r))),o.handleCancelClick=function(){o.trackScopedAction("cancel.click"),o.props.handleCancelClick()},o.handleConfirmSignup=function(){o.trackScopedAction("confirm.click"),o.props.handleConfirmSignup(!1)},o.handleConfirmSignupWithSpinner=function(){o.trackScopedAction("confirm.click"),o.props.handleConfirmSignup(!0)},o.handleShowLogin=function(){o.trackScopedAction("login.click"),o.props.handleShowLogin()},i=n,p(o,i)}return u(t,e),t.prototype.componentDidMount=function e(){this.props.contextLog(120,{viewParameter:3202}),this.disableBackgroundScrolling(),this.trackScopedAction("shown")},t.prototype.componentWillUnmount=function e(){this.enableBackgroundScrolling()},t.prototype.trackScopedAction=function e(t){Object(H.a)("unauth.google_one_tap.confirmation_dialog."+this.props.step+"."+t)},t.prototype.disableBackgroundScrolling=function e(){document.body&&(document.body.style.overflow="hidden")},t.prototype.enableBackgroundScrolling=function e(){document.body&&(document.body.style.overflow="")},t.prototype.newStrings=function e(){var t=w.a._("Create a new account","Title of a dialog telling the user will create an account if they click the `continue` button below"),n=w.a._("Weâ€™re almost done creating your Pinterest accountâ€”but if you already have one, itâ€™s not too late to <b>log in here.</b>","Clickable text which will stop a new account from being created and display the login form"),o=w.a._("Continue","Text on a button which will create an account when clicked"),i=w.a._("Finishing up...","Title of a dialog telling the user that an account is almost done being created."),a=w.a._("Creating your account...","Title of a dialog telling the user that an account is being created."),r=w.a._("Account is being created","Accessibility label for account creation loading dialog"),l=w.a._("Didnâ€™t mean to create a new account?","Description text telling the user that they can log in if they did not intend to create a new account"),c=w.a._("Click here to log in.","Login button which will show the login modal and enable the user to log in")},t.prototype.renderDelayedSignupConfirmation=function e(t){var n=this;return E.a.createElement(ee,{signupDelay:t,handleLogin:this.handleShowLogin,handleSignup:function e(){n.handleConfirmSignup()},loggingId:ie.DELAYED_SIGNUP_LOADING_SPINNER})},t.prototype.renderContentInModalContainer=function e(t){var n=null;return n="top"===this.props.layoutStyle?E.a.createElement(N.b,{color:"white",direction:"column",display:"flex",margin:6,padding:7,position:"fixed",right:!0,shape:"rounded",top:!0,width:376},this.props.loading?E.a.createElement(te.a,null):null,t):E.a.createElement(N.b,{bottom:!0,color:"white",direction:"column",display:"flex",height:168,padding:7,position:"fixed",width:"100%"},this.props.loading?E.a.createElement(te.a,null):null,t),E.a.createElement("div",{style:oe.modalOverlay},n)},t.prototype.renderStaticSignupLoginConfirmation=function e(t){return E.a.createElement(N.b,null,E.a.createElement(N.b,{display:"inlineBlock",position:"absolute",top:!0,right:!0,marginTop:2,marginRight:2},E.a.createElement(N.n,{accessibilityLabel:w.a._("Cancel","Button to close the signup/login modal"),icon:"cancel",onClick:this.handleCancelClick,size:"sm"})),E.a.createElement(N.J,{align:"left",size:"xl",bold:!0},w.a._("Continue to Pinterest","Title of a dialog telling enabling the user to continue with sign up or log in")),E.a.createElement(N.b,{marginTop:2},E.a.createElement(N.J,{align:"left",size:"md"},w.a._("Selecting sign up will create a new accountâ€”so if you already have one, log in instead.","Description text of a dialog which allows a user to sign up or log in"))),E.a.createElement(N.b,{marginTop:5},E.a.createElement(N.c,{color:"red",onClick:this.handleConfirmSignupWithSpinner,text:w.a._("Sign up","Text on a button which will create an account when clicked")})),E.a.createElement(N.b,{marginTop:2},E.a.createElement(N.c,{color:"gray",onClick:this.handleShowLogin,text:w.a._("Log in","Text on a button which will take the user to login when clicked")})),t?E.a.createElement(N.b,{marginTop:4,marginLeft:4,marginRight:4},E.a.createElement(ne.a,{dark:!0})):null)},t.prototype.render=function e(){var t=void 0;return this.props.step===ie.DELAYED_SIGNUP_LOADING_SPINNER?t=this.renderDelayedSignupConfirmation(this.props.delayedSignupLoadingSpinnerDuration):this.props.step===ie.STATIC_SIGNUP_LOGIN?t=this.renderStaticSignupLoginConfirmation(!1):this.props.step===ie.STATIC_SIGNUP_LOGIN_WITH_TOS&&(t=this.renderStaticSignupLoginConfirmation(!0)),this.renderContentInModalContainer(t)},t}(y.Component),re=Object(J.a)(ae),le=n("ok+N"),ce="IFRAME[src*='smartlock']",se=250,pe="DISPLAY_RP_TOS",ue=function e(){return new Promise(function(e,t){if("undefined"!=typeof window)var n=setInterval(function(){var t=window.document.querySelector("IFRAME[src*='smartlock']");t&&t.style&&t.style.height&&(clearInterval(n),e(t))},250);else t()})},ge=function e(){return new Promise(function(e,t){ue().then(function(t){t.style.bottom="70px",e(t.getBoundingClientRect().bottom,t.style.top,t.style.bottom)},function(){t()})})},de=function e(){return"undefined"!=typeof window&&window.GOOGLE_ONETAP_EXPERIMENTAL_FEATURES&&window.GOOGLE_ONETAP_EXPERIMENTAL_FEATURES.includes("DISPLAY_RP_TOS")},he=n("OfNO"),fe={USER_CANCELED:"userCanceled",NO_CREDENTIALS_AVAILABLE:"noCredentialsAvailable",REQUEST_FAILED:"requestFailed",OPERATION_CANCELED:"operationCanceled",ILLEGAL_CONCURRENT_REQUEST:"illegalConcurrentRequest",INITIALIZATION_ERROR:"initializationError",CONFIGURATION_ERROR:"configurationError"},me=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return null;var o={supportedAuthMethods:["https://accounts.google.com"],supportedIdTokenProviders:[{uri:"https://accounts.google.com",clientId:he.a.settings.GPLUS_CLIENT_ID}],context:"continue"};return n?t.hint(o):t.retrieve(o)},_e=function e(t){t&&t.cancelLastOperation&&t.cancelLastOperation().then(function(){})},ye=void 0,Ee=n("+QQJ"),Se=2,Te=Object.freeze({RETRIEVE:"retrieve",HINT:"hint"}),be=["US","CA","NZ","AU"],Oe="DISPLAY_CLICKJACKING_POPUP",we=function(e){function t(n){g(this,t);var i=d(this,e.call(this,n));return i.onRetrieveCredentialsSuccess=function(e,t){W.a.disableGoogleOneTapDialog(),i.showLoading(),i.trackGoogleOneTapAction(t+".success");var n={google_open_id_token:e.idToken};i.login(n,{container:"googleOneTap"}).then(function(e){i.onLoginSuccess(e)},function(e){i.onLoginFailure(n,t,e)}),i.contextLogSignupLoginEvent(7534)},i.onRetrieveCredentialsFailure=function(e,t){var n=e&&e.type||"unknown";i.trackGoogleOneTapAction(t+".error."+n)},i.onLoginSuccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.trackGoogleOneTapAction("hint.login.success"),i.contextLogSignupLoginEvent(7536),M.b.handleRedirectWithFallbackWindowLocation(null,!0)},i.onLoginFailure=function(e,t,n){var o=i.context.userAgent.isMobile,a=i.props,r=a.handleLoginError,l=a.handle2FALogin;i.hideLoading();var c=n&&n.api_error_code||0;if(i.trackGoogleOneTapAction("hint.login.error."+c),i.contextLogSignupLoginEvent(7535),c===T.a.LOGIN_USER_NOT_FOUND)i.showConfirmationDialog(e,t);else if(c===T.a.LOGIN_MFA_REQUIRED){if(o)return void Object(K.a)(w.a._("Looks like you have 2FA enabled. Try again from our home page!"),"/login/");l({gplus_id_token:e.google_open_id_token})}else{var s=null,p="";o?(p=w.a._("Oops! We couldnâ€™t log you in with that account. Try again from our home page."),s=T.a.GEN.templateConst.settings.LOGIN_URL):p=w.a._("We couldnâ€™t log you in with that account. Try the Google button!"),Object(K.a)(p,s),r(n)}},i.onSignupSuccess=function(e){i.trackGoogleOneTapAction("hint.signup.success"),i.contextLogSignupLoginEvent(7487),M.b.handleSignupRedirect("/")},i.onSignupFailure=function(e){var t=i.context.userAgent.isMobile,n=e&&e.api_error_code||0;i.trackGoogleOneTapAction("hint.signup.error."+n),i.contextLogSignupLoginEvent(7488),i.hideLoading(),i.hideConfirmationDialog();var o=null,a="";t?(a=w.a._("Oops! We couldnâ€™t sign you up with that account. Try again from our home page."),o="/login/"):a=w.a._("We couldnâ€™t sign you up with that account. Try the Google button!"),Object(K.a)(a,o),i.props.handleSignupError()},i.inPreventClickjackingExperiment=function(){return"home"===i.context.pageType?(i.props.seoUnauthExperiments.v2ActivateExperiment("unauth_desktop_home_google_one_tap_prevent_clickjacking")||"").startsWith("enabled"):(i.props.seoUnauthExperiments.v2ActivateExperiment("unauth_desktop_lp_google_one_tap_prevent_clickjacking")||"").startsWith("enabled")},i.trackGoogleOneTapAction=function(e){Object(H.a)("unauth.google_one_tap."+e)},i.shouldUseMediatedAuthentication=function(){return!W.a.isGoogleOneTapDisabled()},i.showInlineTermsOfService=function(){i.setState({showInlineTermsOfService:!0})},i.hideInlineTermsOfService=function(){i.setState({showInlineTermsOfService:!1})},i.attemptCredentialAuthentication=function(e,t,n){i.trackGoogleOneTapAction("request_credentials."+t),setTimeout(function(){me(e,n).then(function(e){i.hideInlineTermsOfService(),i.onRetrieveCredentialsSuccess(e,t)}).catch(function(a){i.onRetrieveCredentialsFailure(a,t);var r=a&&a.type||"";if(n||r===fe.USER_CANCELED)return i.hideInlineTermsOfService(),i.props.handleEmptyCredentials&&i.props.handleEmptyCredentials(),void(n&&r!==fe.USER_CANCELED&&i.props.dispatch(o()));r!==fe.OPERATION_CANCELED&&(i.shouldUseMediatedAuthentication()?i.attemptCredentialAuthentication(e,Te.HINT,!0):i.props.handleEmptyCredentials&&(i.hideInlineTermsOfService(),i.props.handleEmptyCredentials()))})},0),de()||ge().then(function(e){i.props.contextLog(120,{viewParameter:3201}),i.trackGoogleOneTapAction("iframe_shown_height_"+e+"_px"),i.showInlineTermsOfService(),i.setState({googleOneTapIframeBottomPos:e})})},i.handleCancelOneTap=function(){i.hideConfirmationDialog()},i.inMandatoryAgeStepENCountriesExperiment=function(){var e=i.props.seoUnauthExperiments,t=i.context.country;return be.includes(t)&&(e.v2ActivateExperiment("web_unauth_mandatory_age_step_got_en")||"").startsWith("enabled")},i.attemptSignup=function(e){var t=i.context.country,n=i.props,o=n.handleSignupConfirmed,a=n.requestContext,r=n.showRegisterLoadingScreen;e&&i.showLoading();var l=i.state.googleOpenId,c=i.decodeToken(l),s={google_open_id_token:l,first_name:c.given_name,last_name:c.family_name,image_url:c.picture,container:b.a.GOOGLE_ONE_TAP,hybridTier:i.context.hybridTier,page:i.context.pageType};if(o&&(Object(Ee.d)(t)||i.inMandatoryAgeStepENCountriesExperiment()))o(Ee.a.GOOGLE_ONE_TAP,{},s);else{var p=new Q.c(a,"web_unauth_google_one_tap_welcome").enabled();a.experiments._queuedResource&&a.experiments._queuedResource.flush(),r&&p&&r(),z.a.register(s,i.props.seoUnauthExperiments).then(i.onSignupSuccess,i.onSignupFailure),i.contextLogSignupLoginEvent(7537)}},i.renderGoogleConfirmationDialog=function(e,t){return E.a.createElement(re,{handleCancelClick:i.handleCancelOneTap,handleConfirmSignup:i.attemptSignup,handleShowLogin:i.props.handleShowLogin,layoutStyle:e,loading:i.state.loading,step:t,delayedSignupLoadingSpinnerDuration:Se})},i.state={googleOpenId:null,loading:!1,confirmationDialogStep:void 0,showInlineTermsOfService:!1,googleOneTapIframeBottomPos:-1},i}return h(t,e),t.prototype.componentDidMount=function e(){(!W.a.isGoogleOneTapDisabled()||!this.context.isBot&&Object(q.a)(this.props.seoUnauthExperiments))&&(this.setupGoogleOneTap(),this.context.isBot||Object(H.a)("unauth_web_container."+b.a.GOOGLE_ONE_TAP+"."+this.context.hybridTier+".other.shown"))},t.prototype.componentWillUnmount=function e(){_e(window.smartlock)},t.prototype.setupGoogleOneTap=function e(){var t=this;this.context.isBot||(window.onSmartLockLoad=function(e){t.trackGoogleOneTapAction("setup.attempt");try{var n=window.openyolo;t.trackGoogleOneTapAction("open_yolo_load."+!!n),n.setProviderUrlBase("https://smartlock.google.com/iframe/request"),t.inPreventClickjackingExperiment()&&n.setFeatureConfig([Oe]),Object(q.a)(t.props.seoUnauthExperiments)?(t.trackGoogleOneTapAction("show_google_one_tap_in_log_out"),t.attemptCredentialAuthentication(e,Te.HINT,!0)):t.attemptCredentialAuthentication(e,Te.RETRIEVE,!1)}catch(e){var o=e&&e.name||"unknown";t.trackGoogleOneTapAction("setup.error."+o),t.props.handleEmptyCredentials&&t.props.handleEmptyCredentials()}},this.addGoogleOneTapScript())},t.prototype.contextLogSignupLoginEvent=function e(t){var n=this.props,o=n.contextLog,i=n.viewer;i.isAuth?o(t,{login_state:i.isLimitedLogin?2:1,signup_login_method:4}):o(t,{signup_login_method:4})},t.prototype.decodeToken=function e(t){return JSON.parse(window.atob(t.split(".")[1]))},t.prototype.login=function e(t){var n=this.props.seoUnauthExperiments,o={container:b.a.GOOGLE_ONE_TAP,hybridTier:this.context.hybridTier,page:this.context.pageType};return Object(B.a)(t,o,n)},t.prototype.showConfirmationDialog=function e(t,n){var o=this.props,i=o.container,a=o.seoUnauthExperiments,r="";r="InspiredWallSignup"===i?ie.STATIC_SIGNUP_LOGIN:"login_page"===i?ie.STATIC_SIGNUP_LOGIN_WITH_TOS:n===Te.RETRIEVE?(a.v2ActivateExperiment("unauth_desktop_force_tos_pp_on_static_confirmation_dialog")||"").startsWith("enabled")?ie.STATIC_SIGNUP_LOGIN_WITH_TOS:ie.STATIC_SIGNUP_LOGIN:ie.DELAYED_SIGNUP_LOADING_SPINNER,this.setState({googleOpenId:t.google_open_id_token,confirmationDialogStep:r})},t.prototype.hideConfirmationDialog=function e(){this.setState({confirmationDialogStep:void 0})},t.prototype.showLoading=function e(){this.setState({loading:!0})},t.prototype.hideLoading=function e(){this.setState({loading:!1})},t.prototype.addGoogleOneTapScript=function e(){var t=document.createElement("script");t.src="https://smartlock.google.com/client?clientId="+T.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,document.querySelector("head").appendChild(t)},t.prototype.render=function e(){var t=this.context,n=t.isBot,o=t.userAgent.isMobile;if(n)return null;this.inMandatoryAgeStepENCountriesExperiment();var i=this.state,r=i.confirmationDialogStep,l=i.showInlineTermsOfService,c=i.googleOneTapIframeBottomPos;if(r){var s=o?"bottom":"top";return this.renderGoogleConfirmationDialog(s,r)}return l?E.a.createElement(a,{credentialsPlaceholderHeight:c}):null},t}(y.Component),ve=function e(t){return{viewer:t.viewer}};we.contextTypes={country:C.a.string,isBot:C.a.bool,userAgent:C.a.shape({isMobile:C.a.bool.isRequired}).isRequired,hybridTier:C.a.string,pageType:C.a.string};var Le=Object(Y.compose)(Z.b,J.a,le.b,X.withRouter,Object(S.connect)(ve))(we),Ce=function(e){function t(){var n,o,i;f(this,t);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=o=m(this,e.call.apply(e,[this].concat(r))),o.state={showGoogleOneTap:!0},o.hide=function(){o.setState({showGoogleOneTap:!1})},i=n,m(o,i)}return _(t,e),t.prototype.render=function e(){var t=this;return this.state.showGoogleOneTap?E.a.createElement(Le,{container:this.props.container,handleEmptyCredentials:this.hide,handle2FALogin:function e(n){t.hide(),t.props.handleLoginWithMfa(n)},handleLoginError:function e(){t.hide(),t.props.handleLoginError()},handleSignupConfirmed:function e(n,o,i){t.hide(),t.props.handleSignupConfirmed(n,o,i)},handleSignupError:function e(){t.hide(),t.props.handleSignupError()},handleShowLogin:function e(){t.hide(),t.props.handleShowLogin()},showRegisterLoadingScreen:function e(){t.props.showRegisterLoadingScreen&&(t.hide(),t.props.showRegisterLoadingScreen())}}):null},t}(y.Component),Ae=t.default=Ce;Ce.defaultProps={container:"unknown"}}});